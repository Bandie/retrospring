.container.j2-page
  = render 'notification_tabs'
  .col-md-9.col-xs-12.col-sm-9
    %ul.list-group
      - @notifications.each do |notification|
        %li.list-group-item
          .media
            - case notification.target_type
              - when "Answer"
                .pull-left
                  %img.img-rounded.notification--img{src: gravatar_url(notification.target.user)}
                .media-body
                  %h6.media-heading.notification--user
                    = user_screen_name notification.target.user
                  %p.notification--text
                    answered
                    %a{href: show_user_answer_path(username: notification.target.user.screen_name, id: notification.target.id)}
                      your question
                    = time_ago_in_words notification.target.created_at
                    ago
                  .notification--icon
                    %i.fa.fa-exclamation
              - when "Relationship"
                .pull-left
                  %img.img-rounded.notification--img{src: gravatar_url(notification.target.source)}
                .media-body
                  %h6.media-heading.notification--user
                    = user_screen_name notification.target.source
                  %p.notification--text
                    followed you
                    = time_ago_in_words notification.target.created_at
                    ago
                  .notification--icon
                    %i.fa.fa-users
              - when "Smile"
                .pull-left
                  %img.img-rounded.notification--img{src: gravatar_url(notification.target.user)}
                .media-body
                  %h6.media-heading.notification--user
                    = user_screen_name notification.target.user
                  %p.notification--text
                    smiled at
                    %a{href: show_user_answer_path(username: notification.target.user.screen_name, id: notification.target.answer.id)}
                      your answer
                    = time_ago_in_words notification.target.created_at
                    ago
                  .notification--icon
                    %i.fa.fa-smile-o
              - when "Comment"
                .pull-left
                  %img.img-rounded.notification--img{src: gravatar_url(notification.target.user)}
                .media-body
                  %h6.media-heading.notification--user
                    = user_screen_name notification.target.user
                  %p.notification--text
                    commented on
                    %a{href: show_user_answer_path(username: notification.target.user.screen_name, id: notification.target.answer.id)}
                      %a your answer
                    = time_ago_in_words notification.target.created_at
                    ago
                  .notification--icon
                    %i.fa.fa-comments
- Notification.for(current_user).update_all(new: false)